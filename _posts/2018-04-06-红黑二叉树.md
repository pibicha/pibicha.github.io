---
title: 数据结构—红黑二叉树
date: 2018-04-06 11:32:00
categories:
- dataStruct
tags:
- 树
---  

继上一篇的23树，红黑二叉树实质上就是一个23树，在《算法》第四版开篇彩页中，将一颗红黑树展开（未展示nil节点），就是一个23树。  

红黑树还是遵循了二叉树的约束，主要就中将23树中变异节点恢复成了二叉树中的节点——实际上是将3-节点中的左key提取折叠到右key的左子树位置并用红色链接表示；黑色链接代表是普通的1-节点。
### 对-3连接的折叠  
一个红链接，实际上，就是一个-3连接节点中，前两个节点的折叠；比如一个-3节点，有BF两个键，红黑树中规定，左边的键需要降级成为右键的左子节点；  
而原本-3节点的左和中节点，转变为了B的左子节点和右子节点。  

原书对红黑树的一种等价定义（网上一搜红黑树出来的五个定义，是结论上的定义，这里的定义是从实现角度出发的）：  
```text
红链接均为左链接；
没有任何一个节点同时和两条红链接相连；
该树是完美黑色平衡的，即任意空链接到根结点的路径上的黑链接数量相同。
```
对于以上第一条，是一个约定，就像1+1为什么等于2；如果设定红链接都是右链接也没啥关系；  
对于第二条，想想把红链接打开的情况：红链接连接的连个节点，在23树中本是平级的存在；如果存在两个连续的红链接，代表有三个节点在同一个级别；这违反了23树的定义；  
红黑树既要 保证23树的定义也要保证二叉树的定义。  
对于第三条，黑色节点，也就是普通节点，为了保证局部与整体的平衡，需要选装和变色来处理。

### 红黑树的旋转与变色  
关于一二点、在红黑树中需要特别的去维护、如果红链接出现在了右链接，就需要左旋；如果出现了一个节点上有两个红链接，需要变色或是旋转

- 变色  
如果一个节点有两个子节点，其链接都是红色，那么其子节点都转为黑色，自身转为红色并将其父链接转为红链接。  
- 旋转  
如果一个节点其与父节点和子节点的链接有两条红链接，需要视以下情况旋转：  
`/`或`\`字形，如果两条红链接是这种形状，对其右旋或左旋即可；  
`>`或`<`字形，如果是这种形状，需要先对中间层节点旋转；  
旋转过程同AVL，大概说一说行了。  


--- 
### 插入和删除
以上强调的是红链接，原书中也是以链接来解释，能更好提现折叠，但是网上很多都上来直接说红节点和黑节点；  
至于插入和删除；插入过程会不断出现违反上述 `1`,`2`性质的过程，需要不断旋转和变色，在AVL的旋转上再加些自身逻辑判断即可；  
而删除的话，参考[RedBlack.pdf](https://www.cs.princeton.edu/~rs/talks/LLRB/RedBlack.pdf)吧……